jQuery.namespace("jira.widget.dropdown");jira.widget.dropdown=function(){var instances=[];return{addInstance:function(){instances.push(this)},hideInstances:function(){var that=this;jQuery(instances).each(function(){if(that!==this){this.hideDropdown()}})},getHash:function(){if(!this.hash){this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}}return this.hash},displayDropdown:function(){jira.widget.dropdown.current=this;this.hideInstances();this.dropdown.css({display:"block"}).parent().css({position:"relative",zIndex:9000}).addClass("active");this.displayed=true},hideDropdown:function(){jira.widget.dropdown.current=null;this.dropdown.css({display:"none"}).parent().removeClass("active");this.dropdown.parent().css({zIndex:"1"});this.displayed=false},addShim:function(){jQuery.aop.after({target:this,method:"hideDropdown"},function(){if(this.shim){this.shim.css("display","none")}});jQuery.aop.after({target:this,method:"displayDropdown"},function(){if(!this.shim){this.shim=jQuery(document.createElement("iframe"));this.shim.attr({marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:0,align:"left"}).css({position:"absolute",top:this.dropdown.css("top"),display:"none",left:this.dropdown.css("left"),right:this.dropdown.css("right"),height:0,width:0,listStyle:"none",border:"3",margin:"0",zIndex:"-1"}).insertBefore(this.dropdown)}else{this.shim.css({display:"block",height:this.dropdown.outerHeight()+"px",width:this.dropdown.outerWidth()+"px"})}})},addPageScroller:function(){var that=this,getScrollPosition=function(){return(that.dropdown.offset().top-jQuery(window).height())+that.dropdown.height()},enableDisplay=function(){that.displayed=true;that.eventBlockerEl.css({display:"none"})};jQuery.aop.before({target:this,method:"displayDropdown"},function(){if(!this.eventBlockerEl){this.eventBlockerEl=jQuery(document.createElement("div"));this.eventBlockerEl.appendTo(this.dropdown.parent()).css({position:"absolute",zIndex:"9999",top:0})}this.eventBlockerEl.css({height:this.dropdown.height()+"px",width:this.dropdown.width()+"px",left:this.dropdown.css("left"),right:this.dropdown.css("right"),display:"block"})});jQuery.aop.after({target:this,method:"displayDropdown"},function(){if(getScrollPosition()>jQuery(window).scrollTop()){jQuery("html,body").animate({scrollTop:getScrollPosition()},300,"linear",function(){enableDisplay()})}else{enableDisplay()}});jQuery.aop.after({target:this,method:"hideDropdown"},function(){if(jQuery("html,body").is(":animated")){jQuery("html,body").stop()}})},init:function(trigger,dropdown){var that=this;this.addInstance(this);this.dropdown=jQuery(dropdown);this.dropdown.css({display:"none"});this.addPageScroller();if(jQuery.browser.msie){this.addShim()}jQuery(document).keydown(function(e){if(e.keyCode===9){that.hideDropdown()}});if(trigger.target){jQuery.aop.before(trigger,function(){if(!that.displayed){that.displayDropdown()}})}else{that.dropdown.css("top",jQuery(trigger).outerHeight()+"px");trigger.click(function(e){if(!that.displayed){that.displayDropdown();e.stopPropagation()}else{that.hideDropdown()}e.preventDefault()})}jQuery(document.body).click(function(){if(that.displayed){that.hideDropdown()}})}}}();jira.widget.dropdown.Standard=function(trigger,dropdown){var that=begetObject(jira.widget.dropdown);that.init(trigger,dropdown);return that};jira.widget.dropdown.Autocomplete=function(trigger,dropdown){var that=begetObject(jira.widget.dropdown);that.init=function(trigger,dropdown){this.addInstance(this);this.dropdown=jQuery(dropdown).click(function(e){e.stopPropagation()});this.dropdown.css({display:"none"});this.addPageScroller();if(jQuery.browser.msie){this.addShim()}if(trigger.target){jQuery.aop.before(trigger,function(){if(!that.displayed){that.displayDropdown()}})}else{trigger.click(function(e){if(!that.displayed){that.displayDropdown();e.stopPropagation()}})}jQuery(document.body).click(function(){if(that.displayed){that.hideDropdown()}})};that.init(trigger,dropdown);return that};