jQuery.namespace("jira.app.editIssueTypeSchemes");jira.app.editIssueTypeScheme=(function(){var getSelectedOptions=function(){var s=jQuery("#selectedOptions").sortable("serialize").replace(/[\[\]]/g,"").replace(/availableOptions/g,"selectedOptions");if(s===""){return"selectedOptions="}else{return s}};var submitForm=function(eButton){eButton.form.action="ConfigureOptionSchemes.jspa?"+getSelectedOptions();return true};var submitAddConstantForm=function(eButton){var s="ConfigureOptionSchemes!addConstant.jspa?"+getSelectedOptions();s=s+getEscapedFieldValues(["name","description","fieldId","schemeId"]);eButton.form.action=s;return true};var restrictOptions=function(){var queryString=getSelectedOptions().replace(/selectedOptions=/g,"");var selectedOptions=queryString.split("&");var sel2=document.getElementById("defaultOption_select");for(var i=0;i<sel2.options.length;i++){if(sel2.options[i].value===""||arrayContains(selectedOptions,sel2.options[i].value)){jQuery(sel2.options[i]).css({display:"",color:"#000",textDecoration:"none"}).removeAttr("disabled")}else{if(sel2.options[i].selected){sel2.options[i].selected=false;sel2.options[0].selected=true}jQuery(sel2.options[i]).css({display:"none",color:"#ffcccc",textDecoration:"line-through"}).attr("disabled","true")}}};var moveAll=function(fromList,toList){jQuery("#"+fromList).find("li").appendTo(document.getElementById(toList));restrictOptions()};return function(){jQuery("#selectedOptionsRemoveAll").click(function(e){moveAll("selectedOptions","availableOptions");e.preventDefault()});jQuery("#selectedOptionsAddAll").click(function(e){moveAll("availableOptions","selectedOptions");e.preventDefault()});jQuery("#selectedOptions").sortable({update:restrictOptions,opacity:0.7,connectWith:[document.getElementById("availableOptions")]});if(jira.app.editIssueTypeScheme.allowEditOptions){jQuery("#availableOptions").sortable({update:restrictOptions,opacity:0.7,connectWith:[document.getElementById("selectedOptions")]})}jQuery("#submitSave").click(function(){if(/standard/.test(this.className)){submitForm(this)}});jQuery("#submitAdd").click(function(){if(/constant/.test(this.className)){submitAddConstantForm(this)}});restrictOptions()}})();jQuery(document).ready(jira.app.editIssueTypeScheme);